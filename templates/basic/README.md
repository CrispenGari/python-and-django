# Basics of Python Django

### 1. Django's template system

> First, create a directory called templates in your basic directory. Django will look for templates in there.
> Within the templates directory you have just created, create another directory called basic, and within that create a file called index.html.

We don't need to worry about how Django will be able to identify the templates that we are going to create because in the `templates/settings.py` file it is configured for us.

###### `templates/settings.py`

```
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        ....
    },
]
```

> We need to register our application in the `templates/settings.py` under `INSTALLED_APPS` python list by just adding the app name in our case it's `basic` as string as follow:

###### `templates/settings.py`

```
INSTALLED_APPS = [
     ...,
    'basic',
    ....
]
```

> Now in the views.py we should now render the template. The View.py will now look as follows:

```
from django.shortcuts import render
from django.http import HttpResponse
from django.template import loader
# Create your views here.

def main(req):
    template = loader.get_template('basic/index.html')
    context = {}
    return HttpResponse(template.render(context, req))

```

### 2. Static files

Aside from the HTML generated by the server, web applications generally need to serve additional files — such as images, JavaScript, or CSS — necessary to render the complete web page. In Django, we refer to these files as “static files”.

> First, create a directory called static in your `basic` directory. Django will look for static files there, similarly to how Django finds templates inside `basic/templates/`.
> Within the static directory you have just created, create another directory called basic and within that create a file called style.css. In other words, your stylesheet should be at `basic/static/basic/styles.css`. Because of how the AppDirectoriesFinder static file finder works, you can refer to this static file in Django as `basic/styles.css`, similar to how you reference the path for templates.

> Now go to the `basic/static/basic` and create a JavaScript file as well called `index.js`. Create a button in the `index.html` file and load static files so that your index.html will look as follows:

###### `basic/templates/basic/index.html`

```
{% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'basic/styles.css' %}" />

<h1>{{name}}</h1>
<img src="{% static 'basic/avatar.jpg' %}" alt="avatar" id="avatar" />
<br />
<button type="button" id="button">Show Image</button>

<script src="{%static 'basic/index.js'%}"></script>


```

##### `basic/static/basic/styles.css`

```
* {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
    Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
}

```

##### `basic/static/basic/index.js`

```
document.getElementById("button").innerText = "Hide Image";
document.getElementById("button").addEventListener("click", function () {
  if (document.getElementById("avatar").style.display === "none") {
    document.getElementById("avatar").style.display = "block";
    document.getElementById("button").innerText = "Hide Image";
  } else {
    document.getElementById("avatar").style.display = "none";
    document.getElementById("button").innerText = "Show Image";
  }
});
```

> Now the styles are applied and if you click the button then you are toggling the image to be shown or hidden on the DOM. It's working

## More views and Routing

For now we have a single view which is the `main`. Let's say we want to create two more views which is the `about` and the `history` view. Go inside the `views.py` and add the following code to it:

##### `basic/views.py`

```
from django.shortcuts import render
from django.http import HttpResponse
from django.template import loader
# Create your views here.

def main(req):
    template = loader.get_template('basic/index.html')
    context = {
    }
    return HttpResponse(template.render(context, req))

def history(req):
    template = loader.get_template('basic/history.html')
    context ={}
    return HttpResponse(template.render(context, req))

def about(req):
    template = loader.get_template('basic/about.html')
    context ={}
    return HttpResponse(template.render(context, req))
```

> In the urls.py go and add the following

##### `basic/urls.py`

```

from django.urls import path

from . import views

urlpatterns =[
    path('', views.main, name='main'),
    path('about/', views.about, name='about'),
    path('history/', views.history, name='history'),
]
```

> So now we can navigate to different routes which are:

- [Main](http://127.0.0.1:8000/basic/)
- [About](http://127.0.0.1:8000/basic/about/)
- [History](http://127.0.0.1:8000/basic/history/)

## Dynamic Routing

Now we want to say when the user navigate to the history we want to have the id of the history, so the history route will be changed to the following:

##### `basic/urls.py`

```
from django.urls import path

from . import views

urlpatterns =[
    path('', views.main, name='main'),
    path('about/', views.about, name='about'),
    path('history/<int:hist_id>/', views.history, name='history'),
]
```

> The only part that has changed in our url's is the path of the history to:

```
path('history/<int:hist_id>/', views.history, name='history'),
```

> Where hist_id is an integer param that will be recieved in the `basic/views.py` as follows:

```
....
def history(req, hist_id):
    template = loader.get_template('basic/history.html')
    context ={
        'id': hist_id,
    }
    return HttpResponse(template.render(context, req))
....
```

> The params can be either:

- str
- int
- slug
- uuid
- path
  According to the [Documentation](https://docs.djangoproject.com/en/3.1/topics/http/urls/)

##### `basic/templates/basic/history.html`

```
<h1>History</h1>
<h2>id: {{id}}</h2>
```

> If you visit the url: http://127.0.0.1:8000/basic/history/<id>/
> Then we will see the id of the history in the browser

> Let's say we want to add a string param to the history which is the history name, and display it on the history page. We can modify our files as follows:

##### `basic/urls.py`

```

from django.urls import path

from . import views

urlpatterns =[
    path('', views.main, name='main'),
    path('about/', views.about, name='about'),
    path('history/', views.history, name='history'),
]
```

> So now we can navigate to different routes which are:

- [Main](http://127.0.0.1:8000/basic/)
- [About](http://127.0.0.1:8000/basic/about/)
- [History](http://127.0.0.1:8000/basic/history/)

## Dynamic Routing

Now we want to say when the user navigate to the history we want to have the id of the history, so the history route will be changed to the following:

##### `basic/urls.py`

```
from django.urls import path

from . import views

urlpatterns =[
    path('', views.main, name='main'),
    path('about/', views.about, name='about'),
    path('history/<int:hist_id>/<str:hist_name>/', views.history, name='history'),
]
```

```
....
def history(req, hist_id, hist_name):
    template = loader.get_template('basic/history.html')
    context ={
        'id': hist_id,
        'name': hist_name
    }
    return HttpResponse(template.render(context, req))
....
```

##### `basic/templates/basic/history.html`

```
<h1>History</h1>
<h2>id: {{id}}</h2>
<h2>name: {{name}}
```

## Navigating between the pages

Let's say we want to navigate from one view to the other. We are going to have two `a` tags that will navigate from `main.html` to either `history.html` or `about.html`. So our files will have the following code in them.

##### `basic/templates/basic/history.html`

```
<h1>History</h1>
<h2>id: {{id}}</h2>

<a href="{% url 'main'  %}">History</a>
<a href="{% url 'about' %}">About</a>
```

##### `basic/templates/basic/about.html`

```
<h1>About</h1>
<a href="{% url 'main'%}">Home</a>
<a href="{% url 'history' 5  %}">History</a>
```

##### `basic/templates/basic/index.html`

```
<h1>Main</h1>

<a href="{% url 'history' 2  %}">History</a>
<a href="{% url 'about' %}">About</a>

```

> Note that the when navigating to history we are passing 2 as the hist_id because the the path requires a `hist_id` as a param.

##### `basic/views.py`

```
from django.shortcuts import render
from django.http import HttpResponse
from django.template import loader
# Create your views here.

def main(req):
    template = loader.get_template('basic/index.html')
    context = {
    }
    return HttpResponse(template.render(context, req))

def history(req, hist_id):
    template = loader.get_template('basic/history.html')
    context ={
        'id': hist_id,
    }
    return HttpResponse(template.render(context, req))

def about(req):
    template = loader.get_template('basic/about.html')
    context ={}
    return HttpResponse(template.render(context, req))
```

##### `basic/urls.py`

```
from django.urls import path

from . import views

urlpatterns =[
    path('', views.main, name='main'),
    path('about/', views.about, name='about'),
    path('history/<int:hist_id>/', views.history, name='history'),
]
```

> With this we can now navigate among the pages.
